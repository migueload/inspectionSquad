"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8395],{8395:(m,g,c)=>{c.r(g),c.d(g,{DetailsPageModule:()=>O});var r=c(6814),_=c(95),a=c(1929),p=c(1147),d=c(5861),t=c(9212),i=c(7346),A=c(3378);function f(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",15),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.sendReport(!0))}),t._UZ(1,"ion-icon",16),t._uU(2,"\xa0SEND REPORT"),t.qZA()}}function b(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.showConfirmationCancel())}),t._uU(1,"CANCEL"),t.qZA()}}function I(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",15),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.showConfirmationPending())}),t._uU(1,"UPDATE PENDING"),t.qZA()}}function Z(o,u){if(1&o&&(t.TgZ(0,"ion-grid")(1,"ion-col"),t._UZ(2,"ion-img",25),t.qZA()()),2&o){const n=u.$implicit;t.xp6(2),t.MGl("src","data:image/png;base64,",n.url_image,"")}}function T(o,u){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card")(1,"ion-card-content")(2,"ion-item")(3,"ion-label")(4,"b"),t._uU(5,"Section Observation "),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"ion-item")(8,"ion-label")(9,"b"),t._UZ(10,"ion-icon",18),t._uU(11," Observation "),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"ion-item")(14,"ion-label")(15,"b"),t._UZ(16,"ion-icon",18),t._uU(17," Sub Observation "),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"ion-accordion-group")(20,"ion-accordion",19)(21,"ion-item",20)(22,"ion-label"),t._UZ(23,"ion-icon",21),t._uU(24," Comments "),t.qZA()(),t.TgZ(25,"div",22),t._uU(26),t.qZA()()(),t.TgZ(27,"ion-accordion-group")(28,"ion-accordion",19)(29,"ion-item",23),t.NdJ("click",function(){const l=t.CHM(n).$implicit,h=t.oxw();return t.KtG(h.showPhotos(l.id))}),t.TgZ(30,"ion-label"),t._UZ(31,"ion-icon",24),t._uU(32," Show Photos "),t.qZA()(),t.TgZ(33,"div",22),t.YNc(34,Z,3,1,"ion-grid",12),t.qZA()()()()()}if(2&o){const n=u.$implicit,s=t.oxw();t.xp6(6),t.hij(" ",n.seccion_observation,""),t.xp6(6),t.Oqu(n.description_observation),t.xp6(6),t.Oqu(n.observation_child_name),t.xp6(8),t.hij(" ",n.comments," "),t.xp6(8),t.Q6J("ngForOf",s.photos)}}const v=o=>["/observation-section",o],y=[{path:"",component:(()=>{class o{constructor(n,s,e,l,h,w,P){this.navCtrl=n,this.service=s,this.activatedRoute=e,this.actionSheetCtrl=l,this.alert=h,this.toast=w,this.loadingController=P,this.user=localStorage.getItem("username"),this.isAlertOpen=!1,this.alertButtons=["Action"]}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.showDetails(this.id)}showDetails(n){this.service.getInspectionById({id:n}).subscribe(e=>{this.id_assing_inspection=e.id,this.getDetails(this.id_assing_inspection)},e=>{console.log("Error"+e)})}getDetails(n){this.service.getDetailsInspection({id:n}).subscribe(e=>{console.log(e),this.type=e[0].type_inspection,this.description_inspection=e[0].description_inspection,this.inspect_by=e[0].nombre_inspector,this.id_inspection=e[0].id_inspection,this.datos=e,this.name_emp=localStorage.getItem("name_emp"),this.swPending="0"==e[0].status,this.swCompleted="1"==e[0].status},e=>{console.log("Error"+e)})}sendReport(n){const s=localStorage.getItem("id_assigment");this.service.generateReport(s).subscribe(e=>{this.isAlertOpen=n},e=>{console.log("Error"+e)})}addObservation(){localStorage.setItem("id_inspection",this.id_inspection)}showConfirmationPending(){var n=this;return(0,d.Z)(function*(){yield(yield n.alert.create({header:"Confirmation",message:"\xbfAre you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Ok",handler:()=>{n.swPending=!0,n.updateInspection(n.id,0)}}]})).present()})()}showConfirmationCancel(){var n=this;return(0,d.Z)(function*(){yield(yield n.alert.create({header:"Confirmation",message:"\xbfAre you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Ok",handler:()=>{n.swPending=!1,n.updateInspection(n.id,2)}}]})).present()})()}showPhotos(n){var s=this;return(0,d.Z)(function*(){const e=yield s.loadingController.create({message:"loading photos..."});yield e.present(),s.service.getPhotos({id_observation:n}).subscribe(h=>{e.dismiss(),s.photos=h},h=>{e.dismiss(),console.log("Error"+h)})})()}updateInspection(n,s){this.service.setUpdateStatus({id:n,status:s}).subscribe(l=>{this.success()},l=>{console.log("Error"+l)})}success(){var n=this;return(0,d.Z)(function*(){(yield n.toast.create({message:"The inspection was updated.",duration:3e3,position:"middle"})).present()})()}presentActionSheet(){var n=this;return(0,d.Z)(function*(){yield(yield n.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{n.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(i.SH),t.Y36(A.m),t.Y36(p.gz),t.Y36(a.BX),t.Y36(a.Br),t.Y36(a.yF),t.Y36(a.HT))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-details"]],decls:38,vars:15,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[1,"titulo"],[2,"font-size","14px"],["fill","solid","size","small","shape","round",3,"routerLink","click"],["name","add-outline"],["fill","solid","size","small","shape","round",3,"click",4,"ngIf"],["header","Send Report","message","The report has been sent successfully.",3,"isOpen","subHeader","buttons","didDismiss"],["fill","clear","size","small","shape","round","style","background-color: #b11c44;color: #fff;",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["fill","default","expand","full","routerLink","../../list",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],["fill","solid","size","small","shape","round",3,"click"],["name","send-outline"],["fill","clear","size","small","shape","round",2,"background-color","#b11c44","color","#fff",3,"click"],["name","checkmark-outline"],["value","first"],["slot","header","color","light"],["name","chatbubble-ellipses-outline"],["slot","content",1,"ion-padding"],["slot","header","color","light",3,"click"],["name","image"],[3,"src"]],template:function(s,e){1&s&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"ion-img",1),t.TgZ(3,"div",2),t.NdJ("click",function(){return e.presentActionSheet()}),t.TgZ(4,"ion-label",3),t._uU(5),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content"),t._UZ(8,"br"),t.TgZ(9,"ion-item")(10,"ion-label",5),t._uU(11,"DETAILS OBSERVATIONS IN INSPECTION "),t.qZA()(),t.TgZ(12,"ion-card")(13,"ion-card-header")(14,"ion-label",6)(15,"b"),t._uU(16,"Inspected by: "),t.qZA(),t._uU(17),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"ion-card-title"),t._uU(20),t.qZA(),t._UZ(21,"br"),t.qZA(),t.TgZ(22,"ion-grid")(23,"ion-col")(24,"ion-button",7),t.NdJ("click",function(){return e.addObservation()}),t._UZ(25,"ion-icon",8),t._uU(26,"\xa0ADD"),t.qZA()(),t.TgZ(27,"ion-col"),t.YNc(28,f,3,0,"ion-button",9),t.TgZ(29,"ion-alert",10),t.NdJ("didDismiss",function(){return e.sendReport(!1)}),t.qZA()(),t.TgZ(30,"ion-col"),t.YNc(31,b,2,0,"ion-button",11)(32,I,2,0,"ion-button",9),t.qZA()()(),t.YNc(33,T,35,5,"ion-card",12),t.qZA(),t.TgZ(34,"footer")(35,"ion-button",13),t._UZ(36,"ion-icon",14),t._uU(37,"Back"),t.qZA()()),2&s&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("",e.user," "),t.xp6(12),t.Oqu(e.inspect_by),t.xp6(3),t.AsE("",e.type," - ",e.description_inspection,""),t.xp6(4),t.Q6J("routerLink",t.VKq(13,v,e.type)),t.xp6(4),t.Q6J("ngIf",e.swCompleted),t.xp6(1),t.s9C("subHeader",e.name_emp),t.Q6J("isOpen",e.isAlertOpen)("buttons",e.alertButtons),t.xp6(2),t.Q6J("ngIf",e.swPending),t.xp6(1),t.Q6J("ngIf",!e.swPending),t.xp6(1),t.Q6J("ngForOf",e.datos))},dependencies:[r.sg,r.O5,a.We,a.eh,a.Ge,a.YG,a.PM,a.FN,a.Zi,a.Dq,a.wI,a.W2,a.jY,a.Gu,a.gu,a.Xz,a.Ie,a.Q$,a.sr,a.YI,p.rH],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:18px}ion-img[_ngcontent-%COMP%]{width:100%;height:auto}"]})}return o})()}];let C=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(y),p.Bz]})}return o})(),O=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[r.ez,_.u5,a.Pc,C]})}return o})()},3378:(m,g,c)=>{c.d(g,{m:()=>a});var r=c(9862),_=c(9212);let a=(()=>{class p{constructor(t){this.http=t,this.urlApi="https://www.inspectionsquad.com/api/",this.urlApiReport="https://www.inspectionsquad.com/report/index.php"}getInspectionstAll(){return this.http.get(this.urlApi+"Inspections/getAll")}getAsignmentAll(){return this.http.get(this.urlApi+"Assignment/getAll")}getAssigmentById(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/getById",t,i)}getLogin(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Usuarios/login",t,i)}getObservationSection(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getByIdFather",t,i)}getObservation(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservation",t,i)}getObservationChild(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservationChild",t,i)}saveAssing(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/save",t,i)}delAssing(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/delete",t,i)}saveInspection(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/save",t,i)}saveInspectionDetails(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveDetails",t,i)}getInspectionsByStatusAndId(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatusAndId",t,i)}getInspectionsByStatus(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatus",t,i)}getInspectors(){return this.http.get(this.urlApi+"Inspectors/getAll")}delInspector(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/delete",t,i)}saveInspector(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/save",t,i)}getInspectionById(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionById",t,i)}getDetailsInspection(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getDetailsInspection",t,i)}setUpdateStatus(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/setUpdateStatus",t,i)}saveImage(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveImage",t,i)}getPhotos(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getPhotos",t,i)}delPhoto(t){const i={headers:new r.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/delImage",t,i)}generateReport(t){return this.http.get(this.urlApiReport+"?id="+t)}static#t=this.\u0275fac=function(i){return new(i||p)(_.LFG(r.eN))};static#e=this.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);