"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9741],{9741:(I,v,p)=>{p.r(v),p.d(v,{ObservationChildPageModule:()=>O});var i=p(6814),u=p(95),a=p(1929),l=p(1147),m=p(5861),t=p(9212),e=p(3378),n=p(7346);function b(r,d){if(1&r){const h=t.EpF();t.TgZ(0,"ion-item")(1,"ion-radio",15),t.NdJ("click",function(){const c=t.CHM(h).$implicit,g=t.oxw();return t.KtG(g.setCode(c))}),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()}if(2&r){const h=d.$implicit;t.xp6(1),t.s9C("value",h.code),t.xp6(1),t.Oqu(h.observation_child_name)}}const _=[{path:"",component:(()=>{var r;class d{constructor(o,s,c,g){this.service=o,this.activatedRoute=s,this.navCtrl=c,this.actionSheetCtrl=g,this.comments="",this.user=localStorage.getItem("username"),this.name_emp=localStorage.getItem("name_emp"),this.date=localStorage.getItem("date"),this.address_emp=localStorage.getItem("address_emp"),this.id_inspection=localStorage.getItem("id_inspection")}ngOnInit(){this.id_observation=this.activatedRoute.snapshot.paramMap.get("id"),this.loadObservationChild(this.id_observation),this.id_inspection=localStorage.getItem("id_inspection")}loadObservationChild(o){this.service.getObservationChild({id:o}).subscribe(c=>{this.observations=c},c=>{console.log("Error"+c)})}setCode(o){const c=[localStorage.getItem("codes")];c.push(o.code),localStorage.setItem("codes",c),localStorage.setItem("observation_child",o.observation_child_name)}saveInspection(){if(""!=this.id_inspection)localStorage.getItem("codes").split(","),this.saveInspectionDetails(this.id_inspection);else{const o={id_inspector:localStorage.getItem("id_inspector"),id_assing_inspection:localStorage.getItem("id_assigment")};this.service.saveInspection(o).subscribe(s=>{localStorage.setItem("id_inspection",s),this.saveInspectionDetails(s),""==this.observations&&localStorage.setItem("observation_child","")},s=>{console.log("Error"+s)})}this.navCtrl.navigateForward("observation-resume")}saveInspectionDetails(o){const s=localStorage.getItem("codes").split(","),c={id_inspection:o,type_inspection:s[0],observation_section:s[1],observation:s[2],observation_child:s[3],comments:this.comments};localStorage.setItem("comments",this.comments),this.service.saveInspectionDetails(c).subscribe(g=>{localStorage.setItem("id_observation",g),console.log("exito")},g=>{console.log("Error"+g)}),this.clearObservations()}clearObservations(){const o=[],c=localStorage.getItem("codes").split(",")[0];localStorage.setItem("codes",""),o.push(c),localStorage.setItem("codes",o)}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}presentActionSheet(){var o=this;return(0,m.Z)(function*(){yield(yield o.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{o.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}}return(r=d).\u0275fac=function(o){return new(o||r)(t.Y36(e.m),t.Y36(l.gz),t.Y36(n.SH),t.Y36(a.BX))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-observation-child"]],decls:41,vars:7,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[2,"text-align","left","margin-left","20px","margin-bottom","20px"],[1,"titulo"],["value","observation_child"],[4,"ngFor","ngForOf"],["placeholder","Type comments here",3,"ngModel","ngModelChange"],[2,"margin-left","20px","padding-right","20px","margin-bottom","20px"],["fill","clear","expand","full",2,"background-color","#1c345c","color","#fff",3,"click"],["name","checkmark-outline"],["fill","default","expand","full","routerLink","../../dashboard",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],[3,"value","click"]],template:function(o,s){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"ion-img",1),t.TgZ(3,"div",2),t.NdJ("click",function(){return s.presentActionSheet()}),t.TgZ(4,"ion-label",3),t._uU(5),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-card")(9,"ion-card-header")(10,"ion-label")(11,"b"),t._uU(12,"Establishment Address:"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"ion-label")(15,"b"),t._uU(16,"Establishment Name:"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"ion-label")(19,"b"),t._uU(20,"Date:"),t.qZA(),t._uU(21),t.qZA()()(),t._UZ(22,"br"),t.TgZ(23,"div",5)(24,"ion-label",6),t._uU(25,"OBSERVATION SECTION"),t.qZA()(),t.TgZ(26,"ion-list")(27,"ion-radio-group",7),t.YNc(28,b,4,2,"ion-item",8),t.qZA()(),t._UZ(29,"br"),t.TgZ(30,"ion-card")(31,"ion-card-content")(32,"ion-textarea",9),t.NdJ("ngModelChange",function(g){return s.comments=g}),t.qZA()()(),t.TgZ(33,"div",10)(34,"ion-button",11),t.NdJ("click",function(){return s.saveInspection()}),t._UZ(35,"ion-icon",12),t._uU(36,"Save all"),t.qZA()()(),t.TgZ(37,"footer")(38,"ion-button",13),t._UZ(39,"ion-icon",14),t._uU(40,"Back"),t.qZA()()),2&o&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("",s.user," "),t.xp6(8),t.hij(" ",s.address_emp,""),t.xp6(4),t.hij(" ",s.name_emp,""),t.xp6(4),t.hij(" ",s.date,""),t.xp6(7),t.Q6J("ngForOf",s.observations),t.xp6(4),t.Q6J("ngModel",s.comments))},dependencies:[i.sg,u.JJ,u.On,a.YG,a.PM,a.FN,a.Zi,a.W2,a.Gu,a.gu,a.Xz,a.Ie,a.Q$,a.q_,a.B7,a.se,a.g2,a.sr,a.U5,a.QI,a.j9,a.YI,l.rH],styles:["ion-label[_ngcontent-%COMP%]{font-size:16px}"]}),d})()}];let A=(()=>{var r;class d{}return(r=d).\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.Bz.forChild(_),l.Bz]}),d})(),O=(()=>{var r;class d{}return(r=d).\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[i.ez,u.u5,a.Pc,A]}),d})()},3378:(I,v,p)=>{p.d(v,{m:()=>a});var i=p(9862),u=p(9212);let a=(()=>{var l;class m{constructor(e){this.http=e,this.urlApi="https://www.inspectionsquad.com/api/",this.urlApiReport="https://www.inspectionsquad.com/report/index.php"}getInspectionstAll(){return this.http.get(this.urlApi+"Inspections/getAll")}getAsignmentAll(){return this.http.get(this.urlApi+"Assignment/getAll")}getAssigmentById(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/getById",e,n)}getLogin(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Usuarios/login",e,n)}getObservationSection(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getByIdFather",e,n)}getObservation(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservation",e,n)}getObservationChild(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservationChild",e,n)}saveAssing(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/save",e,n)}delAssing(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/delete",e,n)}saveInspection(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/save",e,n)}saveInspectionDetails(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveDetails",e,n)}getInspectionsByStatusAndId(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatusAndId",e,n)}getInspectionsByStatus(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatus",e,n)}getInspectors(){return this.http.get(this.urlApi+"Inspectors/getAll")}delInspector(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/delete",e,n)}saveInspector(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/save",e,n)}getInspectionById(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionById",e,n)}getDetailsInspection(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getDetailsInspection",e,n)}setUpdateStatus(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/setUpdateStatus",e,n)}saveImage(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveImage",e,n)}getPhotos(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getPhotos",e,n)}delPhoto(e){const n={headers:new i.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/delImage",e,n)}generateReport(e){return this.http.get(this.urlApiReport+"?id="+e)}}return(l=m).\u0275fac=function(e){return new(e||l)(u.LFG(i.eN))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),m})()}}]);