"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8395],{8395:(f,m,h)=>{h.r(m),h.d(m,{DetailsPageModule:()=>P});var c=h(6814),A=h(95),r=h(1929),u=h(1147),d=h(5861),t=h(9212),e=h(7346),o=h(3378);function b(s,p){if(1&s){const l=t.EpF();t.TgZ(0,"ion-button",15),t.NdJ("click",function(){t.CHM(l);const i=t.oxw();return t.KtG(i.sendReport(!0))}),t._UZ(1,"ion-icon",16),t._uU(2,"\xa0SEND REPORT"),t.qZA()}}function v(s,p){if(1&s){const l=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){t.CHM(l);const i=t.oxw();return t.KtG(i.showConfirmationCancel())}),t._uU(1,"CANCEL"),t.qZA()}}function I(s,p){if(1&s){const l=t.EpF();t.TgZ(0,"ion-button",15),t.NdJ("click",function(){t.CHM(l);const i=t.oxw();return t.KtG(i.showConfirmationPending())}),t._uU(1,"UPDATE PENDING"),t.qZA()}}function Z(s,p){if(1&s&&(t.TgZ(0,"ion-grid")(1,"ion-col"),t._UZ(2,"ion-img",25),t.qZA()()),2&s){const l=p.$implicit;t.xp6(2),t.MGl("src","data:image/png;base64,",l.url_image,"")}}function T(s,p){if(1&s){const l=t.EpF();t.TgZ(0,"ion-card")(1,"ion-card-content")(2,"ion-item")(3,"ion-label")(4,"b"),t._uU(5,"Section Observation "),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"ion-item")(8,"ion-label")(9,"b"),t._UZ(10,"ion-icon",18),t._uU(11," Observation "),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"ion-item")(14,"ion-label")(15,"b"),t._UZ(16,"ion-icon",18),t._uU(17," Sub Observation "),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"ion-accordion-group")(20,"ion-accordion",19)(21,"ion-item",20)(22,"ion-label"),t._UZ(23,"ion-icon",21),t._uU(24," Comments "),t.qZA()(),t.TgZ(25,"div",22),t._uU(26),t.qZA()()(),t.TgZ(27,"ion-accordion-group")(28,"ion-accordion",19)(29,"ion-item",23),t.NdJ("click",function(){const a=t.CHM(l).$implicit,g=t.oxw();return t.KtG(g.showPhotos(a.id))}),t.TgZ(30,"ion-label"),t._UZ(31,"ion-icon",24),t._uU(32," Show Photos "),t.qZA()(),t.TgZ(33,"div",22),t.YNc(34,Z,3,1,"ion-grid",12),t.qZA()()()()()}if(2&s){const l=p.$implicit,n=t.oxw();t.xp6(6),t.hij(" ",l.seccion_observation,""),t.xp6(6),t.Oqu(l.description_observation),t.xp6(6),t.Oqu(l.observation_child_name),t.xp6(8),t.hij(" ",l.comments," "),t.xp6(8),t.Q6J("ngForOf",n.photos)}}const y=s=>["/observation-section",s],C=[{path:"",component:(()=>{var s;class p{constructor(n,i,a,g,_,w,D){this.navCtrl=n,this.service=i,this.activatedRoute=a,this.actionSheetCtrl=g,this.alert=_,this.toast=w,this.loadingController=D,this.user=localStorage.getItem("username"),this.isAlertOpen=!1,this.alertButtons=["Action"]}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.showDetails(this.id)}showDetails(n){this.service.getInspectionById({id:n}).subscribe(a=>{this.id_assing_inspection=a.id,this.getDetails(this.id_assing_inspection)},a=>{console.log("Error"+a)})}getDetails(n){this.service.getDetailsInspection({id:n}).subscribe(a=>{console.log(a),this.type=a[0].type_inspection,this.description_inspection=a[0].description_inspection,this.inspect_by=a[0].nombre_inspector,this.id_inspection=a[0].id_inspection,this.datos=a,this.name_emp=localStorage.getItem("name_emp"),this.swPending="0"==a[0].status,this.swCompleted="1"==a[0].status},a=>{console.log("Error"+a)})}sendReport(n){const i=localStorage.getItem("id_assigment");this.service.generateReport(i).subscribe(a=>{this.isAlertOpen=n},a=>{console.log("Error"+a)})}addObservation(){localStorage.setItem("id_inspection",this.id_inspection)}showConfirmationPending(){var n=this;return(0,d.Z)(function*(){yield(yield n.alert.create({header:"Confirmation",message:"\xbfAre you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Ok",handler:()=>{n.swPending=!0,n.updateInspection(n.id,0)}}]})).present()})()}showConfirmationCancel(){var n=this;return(0,d.Z)(function*(){yield(yield n.alert.create({header:"Confirmation",message:"\xbfAre you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Ok",handler:()=>{n.swPending=!1,n.updateInspection(n.id,2)}}]})).present()})()}showPhotos(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loadingController.create({message:"loading photos..."});yield a.present(),i.service.getPhotos({id_observation:n}).subscribe(_=>{a.dismiss(),i.photos=_},_=>{a.dismiss(),console.log("Error"+_)})})()}updateInspection(n,i){this.service.setUpdateStatus({id:n,status:i}).subscribe(g=>{this.success()},g=>{console.log("Error"+g)})}success(){var n=this;return(0,d.Z)(function*(){(yield n.toast.create({message:"The inspection was updated.",duration:3e3,position:"middle"})).present()})()}presentActionSheet(){var n=this;return(0,d.Z)(function*(){yield(yield n.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{n.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}}return(s=p).\u0275fac=function(n){return new(n||s)(t.Y36(e.SH),t.Y36(o.m),t.Y36(u.gz),t.Y36(r.BX),t.Y36(r.Br),t.Y36(r.yF),t.Y36(r.HT))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-details"]],decls:38,vars:15,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[1,"titulo"],[2,"font-size","14px"],["fill","solid","size","small","shape","round",3,"routerLink","click"],["name","add-outline"],["fill","solid","size","small","shape","round",3,"click",4,"ngIf"],["header","Send Report","message","The report has been sent successfully.",3,"isOpen","subHeader","buttons","didDismiss"],["fill","clear","size","small","shape","round","style","background-color: #b11c44;color: #fff;",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["fill","default","expand","full","routerLink","../../list",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],["fill","solid","size","small","shape","round",3,"click"],["name","send-outline"],["fill","clear","size","small","shape","round",2,"background-color","#b11c44","color","#fff",3,"click"],["name","checkmark-outline"],["value","first"],["slot","header","color","light"],["name","chatbubble-ellipses-outline"],["slot","content",1,"ion-padding"],["slot","header","color","light",3,"click"],["name","image"],[3,"src"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"ion-img",1),t.TgZ(3,"div",2),t.NdJ("click",function(){return i.presentActionSheet()}),t.TgZ(4,"ion-label",3),t._uU(5),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content"),t._UZ(8,"br"),t.TgZ(9,"ion-item")(10,"ion-label",5),t._uU(11,"DETAILS OBSERVATIONS IN INSPECTION "),t.qZA()(),t.TgZ(12,"ion-card")(13,"ion-card-header")(14,"ion-label",6)(15,"b"),t._uU(16,"Inspected by: "),t.qZA(),t._uU(17),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"ion-card-title"),t._uU(20),t.qZA(),t._UZ(21,"br"),t.qZA(),t.TgZ(22,"ion-grid")(23,"ion-col")(24,"ion-button",7),t.NdJ("click",function(){return i.addObservation()}),t._UZ(25,"ion-icon",8),t._uU(26,"\xa0ADD"),t.qZA()(),t.TgZ(27,"ion-col"),t.YNc(28,b,3,0,"ion-button",9),t.TgZ(29,"ion-alert",10),t.NdJ("didDismiss",function(){return i.sendReport(!1)}),t.qZA()(),t.TgZ(30,"ion-col"),t.YNc(31,v,2,0,"ion-button",11)(32,I,2,0,"ion-button",9),t.qZA()()(),t.YNc(33,T,35,5,"ion-card",12),t.qZA(),t.TgZ(34,"footer")(35,"ion-button",13),t._UZ(36,"ion-icon",14),t._uU(37,"Back"),t.qZA()()),2&n&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("",i.user," "),t.xp6(12),t.Oqu(i.inspect_by),t.xp6(3),t.AsE("",i.type," - ",i.description_inspection,""),t.xp6(4),t.Q6J("routerLink",t.VKq(13,y,i.type)),t.xp6(4),t.Q6J("ngIf",i.swCompleted),t.xp6(1),t.s9C("subHeader",i.name_emp),t.Q6J("isOpen",i.isAlertOpen)("buttons",i.alertButtons),t.xp6(2),t.Q6J("ngIf",i.swPending),t.xp6(1),t.Q6J("ngIf",!i.swPending),t.xp6(1),t.Q6J("ngForOf",i.datos))},dependencies:[c.sg,c.O5,r.We,r.eh,r.Ge,r.YG,r.PM,r.FN,r.Zi,r.Dq,r.wI,r.W2,r.jY,r.Gu,r.gu,r.Xz,r.Ie,r.Q$,r.sr,r.YI,u.rH],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:18px}ion-img[_ngcontent-%COMP%]{width:100%;height:auto}"]}),p})()}];let O=(()=>{var s;class p{}return(s=p).\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.Bz.forChild(C),u.Bz]}),p})(),P=(()=>{var s;class p{}return(s=p).\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,A.u5,r.Pc,O]}),p})()},3378:(f,m,h)=>{h.d(m,{m:()=>r});var c=h(9862),A=h(9212);let r=(()=>{var u;class d{constructor(e){this.http=e,this.urlApi="https://www.inspectionsquad.com/api/",this.urlApiReport="https://www.inspectionsquad.com/report/index.php"}getInspectionstAll(){return this.http.get(this.urlApi+"Inspections/getAll")}getAsignmentAll(){return this.http.get(this.urlApi+"Assignment/getAll")}getAssigmentById(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/getById",e,o)}getLogin(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Usuarios/login",e,o)}getObservationSection(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getByIdFather",e,o)}getObservation(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservation",e,o)}getObservationChild(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservationChild",e,o)}saveAssing(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/save",e,o)}delAssing(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/delete",e,o)}saveInspection(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/save",e,o)}saveInspectionDetails(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveDetails",e,o)}getInspectionsByStatusAndId(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatusAndId",e,o)}getInspectionsByStatus(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatus",e,o)}getInspectors(){return this.http.get(this.urlApi+"Inspectors/getAll")}delInspector(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/delete",e,o)}saveInspector(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/save",e,o)}getInspectionById(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionById",e,o)}getDetailsInspection(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getDetailsInspection",e,o)}setUpdateStatus(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/setUpdateStatus",e,o)}saveImage(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveImage",e,o)}getPhotos(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getPhotos",e,o)}delPhoto(e){const o={headers:new c.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/delImage",e,o)}generateReport(e){return this.http.get(this.urlApiReport+"?id="+e)}}return(u=d).\u0275fac=function(e){return new(e||u)(A.LFG(c.eN))},u.\u0275prov=A.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),d})()}}]);