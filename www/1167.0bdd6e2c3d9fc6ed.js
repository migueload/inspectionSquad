"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1167],{1167:(I,h,r)=>{r.r(h),r.d(h,{ListPageModule:()=>O});var o=r(6814),u=r(95),s=r(1929),l=r(1147),A=r(5861),t=r(9212),n=r(7346),m=r(3378);function f(a,g){if(1&a&&(t.TgZ(0,"ion-label")(1,"b"),t._uU(2,"Inspected by:"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.nombre_inspector," ")}}const _=a=>["/details",a];function v(a,g){if(1&a&&(t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-card",18)(3,"ion-card-header"),t.YNc(4,f,4,1,"ion-label",15),t.TgZ(5,"ion-label")(6,"b"),t._uU(7,"Date:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"ion-label")(10,"b"),t._uU(11,"Type:"),t.qZA(),t._uU(12),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"ion-card-title"),t._uU(15),t.qZA()(),t.TgZ(16,"ion-card-content")(17,"div",19)(18,"ion-label")(19,"b"),t._UZ(20,"ion-icon",20),t._uU(21,"STATUS: "),t.qZA(),t.TgZ(22,"span",21),t._uU(23),t.qZA()()()()()()()),2&a){const e=g.$implicit,i=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(6,_,e.id)),t.xp6(2),t.Q6J("ngIf",e.nombre_inspector),t.xp6(4),t.hij(" ",e.date,""),t.xp6(4),t.hij(" ",e.id_inspection,""),t.xp6(3),t.Oqu(e.name_emp),t.xp6(8),t.Oqu(i.status)}}function T(a,g){1&a&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-card")(4,"ion-card-content")(5,"ion-label",22),t._uU(6,"No results found"),t.qZA()()()()()())}const y=[{path:"",component:(()=>{class a{constructor(e,i,p){this.navCtrl=e,this.actionSheetCtrl=i,this.service=p,this.user=localStorage.getItem("username"),this.isActionSheetOpen=!1,this.vacio=!1}ngOnInit(){this.load(0)}load(e){"1"==localStorage.getItem("nivel")?this.getInspectionsByStatus(e):this.getInspectionsByStatusAndId(e,localStorage.getItem("id_inspector"))}getStatus(e){let i="";return 0==e&&(i="PENDING"),1==e&&(i="COMPLETED"),2==e&&(i="CANCELED"),i}getInspectionsByStatus(e){this.service.getInspectionsByStatus({status:e}).subscribe(p=>{this.datos=p,console.log(this.datos),this.vacio=null==p[0],this.status=this.getStatus(e)},p=>{console.log("Error"+p)})}getInspectionsByStatusAndId(e,i){this.service.getInspectionsByStatusAndId({status:e,id:i}).subscribe(c=>{this.datos=c,this.vacio=null==c[0],this.status=this.getStatus(e)},c=>{console.log("Error"+c)})}filterByDate(e){const i=e.target.value;i&&""!==i.trim()?this.datos=this.datos.filter(p=>{const c=new Date(p.date),d=new Date(i);return c.toISOString().slice(0,10)===d.toISOString().slice(0,10)}):this.ngOnInit()}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}presentActionSheet(){var e=this;return(0,A.Z)(function*(){yield(yield e.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{e.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(n.SH),t.Y36(s.BX),t.Y36(m.m))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-list"]],decls:34,vars:4,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[2,"text-align","left","margin-left","20px"],[1,"titulo"],["value","buttons"],["value","pending",3,"click"],["value","completed",3,"click"],["value","canceled",3,"click"],[2,"width","400px"],["name","filter-circle-outline"],["type","date","id","date","label","Select Date",3,"ionInput"],[4,"ngFor","ngForOf"],[4,"ngIf"],["fill","default","expand","full","routerLink","../dashboard",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],[3,"routerLink"],[2,"text-align","right"],["name","bookmark"],[1,"status"],[2,"font-size","20px"]],template:function(i,p){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"ion-img",1),t.TgZ(3,"div",2),t.NdJ("click",function(){return p.presentActionSheet()}),t.TgZ(4,"ion-label",3),t._uU(5),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content"),t._UZ(8,"br"),t.TgZ(9,"div",5)(10,"ion-label",6),t._uU(11,"LIST INSPECTIONS"),t.qZA()(),t._UZ(12,"br"),t.TgZ(13,"ion-segment",7)(14,"ion-segment-button",8),t.NdJ("click",function(){return p.load(0)}),t.TgZ(15,"ion-label"),t._uU(16,"Pending"),t.qZA()(),t.TgZ(17,"ion-segment-button",9),t.NdJ("click",function(){return p.load(1)}),t.TgZ(18,"ion-label"),t._uU(19,"Completed"),t.qZA()(),t.TgZ(20,"ion-segment-button",10),t.NdJ("click",function(){return p.load(2)}),t.TgZ(21,"ion-label"),t._uU(22,"Canceled"),t.qZA()()(),t._UZ(23,"br"),t.TgZ(24,"ion-item",11),t._UZ(25,"ion-icon",12),t.TgZ(26,"ion-input",13),t.NdJ("ionInput",function(d){return p.filterByDate(d)}),t.qZA()(),t.TgZ(27,"ion-grid"),t.YNc(28,v,24,8,"ion-row",14),t.qZA(),t.YNc(29,T,7,0,"ion-grid",15),t.qZA(),t.TgZ(30,"footer")(31,"ion-button",16),t._UZ(32,"ion-icon",17),t._uU(33,"Back"),t.qZA()()),2&i&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("",p.user," "),t.xp6(23),t.Q6J("ngForOf",p.datos),t.xp6(1),t.Q6J("ngIf",p.vacio))},dependencies:[o.sg,o.O5,s.YG,s.PM,s.FN,s.Zi,s.Dq,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Xz,s.pK,s.Ie,s.Q$,s.Nd,s.cJ,s.GO,s.sr,s.QI,s.j9,s.YI,l.rH],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:20px}ion-card-subtitle[_ngcontent-%COMP%]{font-size:14px}ion-label[_ngcontent-%COMP%]{font-size:14px}.status[_ngcontent-%COMP%]{color:#1c345c;font-size:14px;font-weight:700}"]})}return a})()}];let Z=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#n=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(y),l.Bz]})}return a})(),O=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#n=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[o.ez,u.u5,s.Pc,Z]})}return a})()},3378:(I,h,r)=>{r.d(h,{m:()=>s});var o=r(9862),u=r(9212);let s=(()=>{class l{constructor(t){this.http=t,this.urlApi="https://www.inspectionsquad.com/api/",this.urlApiReport="https://www.inspectionsquad.com/report/index.php"}getInspectionstAll(){return this.http.get(this.urlApi+"Inspections/getAll")}getAsignmentAll(){return this.http.get(this.urlApi+"Assignment/getAll")}getAssigmentById(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/getById",t,n)}getLogin(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Usuarios/login",t,n)}getObservationSection(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getByIdFather",t,n)}getObservation(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservation",t,n)}getObservationChild(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservationChild",t,n)}saveAssing(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/save",t,n)}delAssing(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/delete",t,n)}saveInspection(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/save",t,n)}saveInspectionDetails(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveDetails",t,n)}getInspectionsByStatusAndId(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatusAndId",t,n)}getInspectionsByStatus(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatus",t,n)}getInspectors(){return this.http.get(this.urlApi+"Inspectors/getAll")}delInspector(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/delete",t,n)}saveInspector(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/save",t,n)}getInspectionById(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionById",t,n)}getDetailsInspection(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getDetailsInspection",t,n)}setUpdateStatus(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/setUpdateStatus",t,n)}saveImage(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveImage",t,n)}getPhotos(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getPhotos",t,n)}delPhoto(t){const n={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/delImage",t,n)}generateReport(t){return this.http.get(this.urlApiReport+"?id="+t)}static#t=this.\u0275fac=function(n){return new(n||l)(u.LFG(o.eN))};static#n=this.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);