"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9741],{9741:(u,d,c)=>{c.r(d),c.d(d,{ObservationChildPageModule:()=>_});var o=c(6814),h=c(95),i=c(1929),p=c(1147),m=c(5861),t=c(9212),e=c(3378),v=c(7346);function I(r,O){if(1&r){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-radio",15),t.NdJ("click",function(){const l=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.setCode(l))}),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()}if(2&r){const n=O.$implicit;t.xp6(1),t.s9C("value",n.code),t.xp6(1),t.Oqu(n.observation_child_name)}}const A=[{path:"",component:(()=>{class r{constructor(n,s,a,l){this.service=n,this.activatedRoute=s,this.navCtrl=a,this.actionSheetCtrl=l,this.comments="",this.user=localStorage.getItem("username"),this.name_emp=localStorage.getItem("name_emp"),this.date=localStorage.getItem("date"),this.address_emp=localStorage.getItem("address_emp"),this.id_inspection=localStorage.getItem("id_inspection")}ngOnInit(){this.id_observation=this.activatedRoute.snapshot.paramMap.get("id"),this.loadObservationChild(this.id_observation),this.id_inspection=localStorage.getItem("id_inspection")}loadObservationChild(n){this.service.getObservationChild({id:n}).subscribe(a=>{this.observations=a},a=>{console.log("Error"+a)})}setCode(n){const a=[localStorage.getItem("codes")];a.push(n.code),localStorage.setItem("codes",a),localStorage.setItem("observation_child",n.observation_child_name)}saveInspection(){if(""!=this.id_inspection)localStorage.getItem("codes").split(","),this.saveInspectionDetails(this.id_inspection);else{const n={id_inspector:localStorage.getItem("id_inspector"),id_assing_inspection:localStorage.getItem("id_assigment")};this.service.saveInspection(n).subscribe(s=>{localStorage.setItem("id_inspection",s),this.saveInspectionDetails(s),""==this.observations&&localStorage.setItem("observation_child","")},s=>{console.log("Error"+s)})}this.navCtrl.navigateForward("observation-resume")}saveInspectionDetails(n){const s=localStorage.getItem("codes").split(","),a={id_inspection:n,type_inspection:s[0],observation_section:s[1],observation:s[2],observation_child:s[3],comments:this.comments};localStorage.setItem("comments",this.comments),this.service.saveInspectionDetails(a).subscribe(l=>{localStorage.setItem("id_observation",l),console.log("exito")},l=>{console.log("Error"+l)}),this.clearObservations()}clearObservations(){const n=[],a=localStorage.getItem("codes").split(",")[0];localStorage.setItem("codes",""),n.push(a),localStorage.setItem("codes",n)}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}presentActionSheet(){var n=this;return(0,m.Z)(function*(){yield(yield n.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{n.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(e.m),t.Y36(p.gz),t.Y36(v.SH),t.Y36(i.BX))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-observation-child"]],decls:41,vars:7,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[2,"text-align","left","margin-left","20px","margin-bottom","20px"],[1,"titulo"],["value","observation_child"],[4,"ngFor","ngForOf"],["placeholder","Type comments here",3,"ngModel","ngModelChange"],[2,"margin-left","20px","padding-right","20px","margin-bottom","20px"],["fill","clear","expand","full",2,"background-color","#1c345c","color","#fff",3,"click"],["name","checkmark-outline"],["fill","default","expand","full","routerLink","../../dashboard",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],[3,"value","click"]],template:function(s,a){1&s&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"ion-img",1),t.TgZ(3,"div",2),t.NdJ("click",function(){return a.presentActionSheet()}),t.TgZ(4,"ion-label",3),t._uU(5),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-card")(9,"ion-card-header")(10,"ion-label")(11,"b"),t._uU(12,"Establishment Address:"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"ion-label")(15,"b"),t._uU(16,"Establishment Name:"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"ion-label")(19,"b"),t._uU(20,"Date:"),t.qZA(),t._uU(21),t.qZA()()(),t._UZ(22,"br"),t.TgZ(23,"div",5)(24,"ion-label",6),t._uU(25,"OBSERVATION SECTION"),t.qZA()(),t.TgZ(26,"ion-list")(27,"ion-radio-group",7),t.YNc(28,I,4,2,"ion-item",8),t.qZA()(),t._UZ(29,"br"),t.TgZ(30,"ion-card")(31,"ion-card-content")(32,"ion-textarea",9),t.NdJ("ngModelChange",function(g){return a.comments=g}),t.qZA()()(),t.TgZ(33,"div",10)(34,"ion-button",11),t.NdJ("click",function(){return a.saveInspection()}),t._UZ(35,"ion-icon",12),t._uU(36,"Save all"),t.qZA()()(),t.TgZ(37,"footer")(38,"ion-button",13),t._UZ(39,"ion-icon",14),t._uU(40,"Back"),t.qZA()()),2&s&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("",a.user," "),t.xp6(8),t.hij(" ",a.address_emp,""),t.xp6(4),t.hij(" ",a.name_emp,""),t.xp6(4),t.hij(" ",a.date,""),t.xp6(7),t.Q6J("ngForOf",a.observations),t.xp6(4),t.Q6J("ngModel",a.comments))},dependencies:[o.sg,h.JJ,h.On,i.YG,i.PM,i.FN,i.Zi,i.W2,i.Gu,i.gu,i.Xz,i.Ie,i.Q$,i.q_,i.B7,i.se,i.g2,i.sr,i.U5,i.QI,i.j9,i.YI,p.rH],styles:["ion-label[_ngcontent-%COMP%]{font-size:16px}"]})}return r})()}];let b=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(A),p.Bz]})}return r})(),_=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[o.ez,h.u5,i.Pc,b]})}return r})()},3378:(u,d,c)=>{c.d(d,{m:()=>i});var o=c(9862),h=c(9212);let i=(()=>{class p{constructor(t){this.http=t,this.urlApi="https://www.inspectionsquad.com/api/",this.urlApiReport="https://www.inspectionsquad.com/report/index.php"}getInspectionstAll(){return this.http.get(this.urlApi+"Inspections/getAll")}getAsignmentAll(){return this.http.get(this.urlApi+"Assignment/getAll")}getAssigmentById(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/getById",t,e)}getLogin(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Usuarios/login",t,e)}getObservationSection(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getByIdFather",t,e)}getObservation(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservation",t,e)}getObservationChild(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Observation/getObservationChild",t,e)}saveAssing(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/save",t,e)}delAssing(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Assignment/delete",t,e)}saveInspection(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/save",t,e)}saveInspectionDetails(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveDetails",t,e)}getInspectionsByStatusAndId(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatusAndId",t,e)}getInspectionsByStatus(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionsByStatus",t,e)}getInspectors(){return this.http.get(this.urlApi+"Inspectors/getAll")}delInspector(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/delete",t,e)}saveInspector(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspectors/save",t,e)}getInspectionById(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getInspectionById",t,e)}getDetailsInspection(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getDetailsInspection",t,e)}setUpdateStatus(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/setUpdateStatus",t,e)}saveImage(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/saveImage",t,e)}getPhotos(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/getPhotos",t,e)}delPhoto(t){const e={headers:new o.WM({"Content-Type":"application/json"})};return this.http.post(this.urlApi+"Inspections/delImage",t,e)}generateReport(t){return this.http.get(this.urlApiReport+"?id="+t)}static#t=this.\u0275fac=function(e){return new(e||p)(h.LFG(o.eN))};static#e=this.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);