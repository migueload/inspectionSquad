"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4811],{4811:(k,d,a)=>{a.r(d),a.d(d,{ObservationResumePageModule:()=>y});var g=a(6814),b=a(95),s=a(1929),u=a(1147),c=a(5861),h=a(8162),e=a(9212),f=a(7346),v=a(3378);function Z(o,l){if(1&o&&(e.TgZ(0,"ion-label")(1,"b"),e._UZ(2,"ion-icon",6),e._uU(3," Sub Observation"),e.qZA(),e._uU(4),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.observation_child," ")}}const A=o=>["/detail-photo",o];function T(o,l){if(1&o&&e._UZ(0,"ion-img",27),2&o){const t=e.oxw(2).$implicit;e.MGl("src","data:image/png;base64,",t.url_image,""),e.Q6J("routerLink",e.VKq(2,A,t.url_image))}}function O(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-col",23)(2,"div",24)(3,"ion-icon",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showConfirmation(i.id))}),e.qZA()(),e.YNc(4,T,1,4,"ion-img",26),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngIf",t.url_image)}}function U(o,l){if(1&o&&e._UZ(0,"ion-img",29),2&o){const t=e.oxw(2).$implicit;e.MGl("src","data:image/png;base64,",t.url_image,"")}}function I(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-col",23)(2,"div",24)(3,"ion-icon",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showConfirmation(i.id))}),e.qZA()(),e.YNc(4,U,1,1,"ion-img",28),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngIf",t.url_image)}}function P(o,l){if(1&o&&(e.TgZ(0,"ion-row"),e.YNc(1,O,5,1,"ng-container",7)(2,I,5,1,"ng-container",7),e.qZA()),2&o){const t=l.index;e.xp6(1),e.Q6J("ngIf",t%2==0),e.xp6(1),e.Q6J("ngIf",t%2!=0)}}const x=o=>["/observation-section",o],S=[{path:"",component:(()=>{class o{constructor(t,n,i,r,m,_){this.navCtrl=t,this.actionSheetCtrl=n,this.alert=i,this.service=r,this.toast=m,this.loadingController=_,this.isAlertOpen=!1,this.alertButtons=["Action"],this.isRefrescar=!1}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.initialItems(),t.getPhotos(),t.refreshPage()})()}initialItems(){console.log("ok"),this.user=localStorage.getItem("username"),this.name_emp=localStorage.getItem("name_emp"),this.date=localStorage.getItem("date"),this.address_emp=localStorage.getItem("address_emp"),this.observation_section=localStorage.getItem("observation_section"),this.observation=localStorage.getItem("observation"),this.observation_child=localStorage.getItem("observation_child"),this.comments=localStorage.getItem("comments"),this.type_inspection=localStorage.getItem("type_inspection")}closeSesion(){localStorage.clear(),this.navCtrl.navigateForward("")}refreshPage(){this.ionViewWillEnter()}ionViewWillEnter(){this.isRefrescar&&(document.location.reload(),this.isRefrescar=!1)}presentActionSheet(){var t=this;return(0,c.Z)(function*(){yield(yield t.actionSheetCtrl.create({header:"Actions",buttons:[{text:"Are you sure you log out?",role:"exit",handler:()=>{t.closeSesion()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})()}showConfirmation(t){var n=this;return(0,c.Z)(function*(){yield(yield n.alert.create({header:"Confirmation",message:"\xbfAre you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Ok",handler:()=>{n.delPhoto(t)}}]})).present()})()}getPhotos(){const t={id_observation:localStorage.getItem("id_observation")};this.service.getPhotos(t).subscribe(n=>{this.photos=n},n=>{console.log("Error"+n)})}delPhoto(t){this.service.delPhoto({id:t}).subscribe(i=>{this.getPhotos()},i=>{console.log("Error"+i)})}generateReport(t){const n=localStorage.getItem("id_assigment");this.service.generateReport(n).subscribe(i=>{this.isAlertOpen=t},i=>{console.log("Error"+i)})}takePhoto(){var t=this;return(0,c.Z)(function*(){const n=yield h.V1.getPhoto({quality:60,allowEditing:!1,resultType:h.dk.Base64});t.saveImage(n.base64String),t.ngOnInit()})()}saveImage(t){var n=this;return(0,c.Z)(function*(){const i=yield n.loadingController.create({message:"Saving image..."});yield i.present();const r=localStorage.getItem("id_inspection"),m=localStorage.getItem("id_observation");n.service.saveImage({id_inspection:r,id_observation:m,url_image:t}).subscribe(p=>{i.dismiss(),n.success(),n.getPhotos()},p=>{i.dismiss(),console.log("Error"+p)})})()}success(){var t=this;return(0,c.Z)(function*(){(yield t.toast.create({message:"The photo has been saved.",duration:3e3,position:"middle"})).present()})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(f.SH),e.Y36(s.BX),e.Y36(s.Br),e.Y36(v.m),e.Y36(s.yF),e.Y36(s.HT))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-observation-resume"]],decls:74,vars:16,consts:[[3,"translucent"],["src","../../assets/img/logo_circle.png","alt","Logo Inspection squad",2,"width","50px"],[1,"user",2,"text-align","right",3,"click"],[2,"color","#6E6E6E"],["name","person"],[1,"titulo"],["name","checkmark-outline"],[4,"ngIf"],["value","first"],["slot","header","color","light"],["name","chatbubble-ellipses-outline"],["slot","content",1,"ion-padding"],[4,"ngFor","ngForOf"],[2,"margin-left","20px","padding-right","20px","margin-bottom","20px"],["color","medium","expand","full",3,"click"],["name","camera-outline"],["fill","clear","expand","full",2,"background-color","#1c345c","color","#fff",3,"routerLink"],["name","add-outline"],["fill","clear","expand","full",2,"background-color","#1c345c","color","#fff",3,"click"],["name","document-outline"],["header","Send Report","message","The report has been sent successfully.",3,"isOpen","subHeader","buttons","didDismiss"],["fill","clear","expand","full","routerLink","../dashboard",2,"background-color","#fff","color","#000"],["name","chevron-back-outline"],["size","6"],[2,"text-align","left"],["name","close-circle-outline",2,"color","#b11c44","font-size","22px",3,"click"],[3,"src","routerLink",4,"ngIf"],[3,"src","routerLink"],[3,"src",4,"ngIf"],[3,"src"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar"),e._UZ(2,"ion-img",1),e.TgZ(3,"div",2),e.NdJ("click",function(){return i.presentActionSheet()}),e.TgZ(4,"ion-label",3),e._uU(5),e._UZ(6,"ion-icon",4),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-card")(9,"ion-card-content")(10,"ion-label")(11,"b"),e._uU(12,"Establishment Name:"),e.qZA(),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"ion-label")(16,"b"),e._uU(17,"Date:"),e.qZA(),e._uU(18),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"ion-label")(21,"b"),e._uU(22,"Establishment Address:"),e.qZA(),e._uU(23),e.qZA(),e._UZ(24,"br"),e.qZA()(),e._UZ(25,"br"),e.TgZ(26,"ion-item")(27,"ion-label",5),e._uU(28,"SUMMARY OF INSPECTION OBSERVATIONS "),e.qZA()(),e.TgZ(29,"ion-card")(30,"ion-card-content")(31,"ion-label")(32,"b"),e._uU(33,"Section Observation"),e.qZA(),e._uU(34),e.qZA(),e._UZ(35,"br")(36,"br"),e.TgZ(37,"ion-label")(38,"b"),e._UZ(39,"ion-icon",6),e._uU(40," Observation"),e.qZA(),e._uU(41),e.qZA(),e._UZ(42,"br"),e.YNc(43,Z,5,1,"ion-label",7),e._UZ(44,"br")(45,"br"),e.TgZ(46,"ion-accordion-group")(47,"ion-accordion",8)(48,"ion-item",9)(49,"ion-label"),e._UZ(50,"ion-icon",10),e._uU(51," Comments"),e.qZA()(),e.TgZ(52,"div",11),e._uU(53),e.qZA()()()()(),e.TgZ(54,"ion-card")(55,"ion-card-content")(56,"ion-grid"),e.YNc(57,P,3,2,"ion-row",12),e.qZA()()(),e.TgZ(58,"div",13)(59,"ion-button",14),e.NdJ("click",function(){return i.takePhoto()}),e._UZ(60,"ion-icon",15),e.qZA()(),e.TgZ(61,"div",13)(62,"ion-button",16),e._UZ(63,"ion-icon",17),e._uU(64,"Add"),e.qZA()(),e.TgZ(65,"div",13)(66,"ion-button",18),e.NdJ("click",function(){return i.generateReport(!0)}),e._UZ(67,"ion-icon",19),e._uU(68,"Send Report"),e.qZA(),e.TgZ(69,"ion-alert",20),e.NdJ("didDismiss",function(){return i.generateReport(!1)}),e.qZA()()(),e.TgZ(70,"footer")(71,"ion-button",21),e._UZ(72,"ion-icon",22),e._uU(73,"Back"),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(5),e.hij("",i.user," "),e.xp6(8),e.hij(" ",i.name_emp,""),e.xp6(5),e.hij(" ",i.date,""),e.xp6(5),e.hij(" ",i.address_emp,""),e.xp6(11),e.hij(" ",i.observation_section,""),e.xp6(7),e.hij(" ",i.observation,""),e.xp6(2),e.Q6J("ngIf",i.observation_child),e.xp6(10),e.hij(" ",i.comments," "),e.xp6(4),e.Q6J("ngForOf",i.photos),e.xp6(5),e.Q6J("routerLink",e.VKq(14,x,i.type_inspection)),e.xp6(7),e.s9C("subHeader",i.name_emp),e.Q6J("isOpen",i.isAlertOpen)("buttons",i.alertButtons))},dependencies:[g.sg,g.O5,s.We,s.eh,s.Ge,s.YG,s.PM,s.FN,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Xz,s.Ie,s.Q$,s.Nd,s.sr,s.YI,u.rH],styles:[".titulo[_ngcontent-%COMP%]{color:#1c345c}ion-img[_ngcontent-%COMP%]{width:70%;height:auto}"]})}return o})()}];let R=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(S),u.Bz]})}return o})(),y=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[g.ez,b.u5,s.Pc,R]})}return o})()}}]);