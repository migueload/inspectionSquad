{"ast":null,"code":"import _asyncToGenerator from \"/Users/migueload/inspectionSquad/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../services/service.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction DetailsPage_ion_button_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function DetailsPage_ion_button_28_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.sendReport(true));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 16);\n    i0.ɵɵtext(2, \"\\u00A0SEND REPORT\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetailsPage_ion_button_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 17);\n    i0.ɵɵlistener(\"click\", function DetailsPage_ion_button_31_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.showConfirmationCancel());\n    });\n    i0.ɵɵtext(1, \"CANCEL\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetailsPage_ion_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function DetailsPage_ion_button_32_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.showConfirmationPending());\n    });\n    i0.ɵɵtext(1, \"UPDATE PENDING\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetailsPage_ion_card_33_ion_grid_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"ion-col\");\n    i0.ɵɵelement(2, \"ion-img\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const photo_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"data:image/png;base64,\", photo_r12.url_image, \"\");\n  }\n}\nfunction DetailsPage_ion_card_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-content\")(2, \"ion-item\")(3, \"ion-label\")(4, \"b\");\n    i0.ɵɵtext(5, \"Section Observation \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-item\")(8, \"ion-label\")(9, \"b\");\n    i0.ɵɵelement(10, \"ion-icon\", 18);\n    i0.ɵɵtext(11, \" Observation \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"ion-item\")(14, \"ion-label\")(15, \"b\");\n    i0.ɵɵelement(16, \"ion-icon\", 18);\n    i0.ɵɵtext(17, \" Sub Observation \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"ion-accordion-group\")(20, \"ion-accordion\", 19)(21, \"ion-item\", 20)(22, \"ion-label\");\n    i0.ɵɵelement(23, \"ion-icon\", 21);\n    i0.ɵɵtext(24, \" Comments \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 22);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"ion-accordion-group\")(28, \"ion-accordion\", 19)(29, \"ion-item\", 23);\n    i0.ɵɵlistener(\"click\", function DetailsPage_ion_card_33_Template_ion_item_click_29_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const dato_r10 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.showPhotos(dato_r10.id));\n    });\n    i0.ɵɵelementStart(30, \"ion-label\");\n    i0.ɵɵelement(31, \"ion-icon\", 24);\n    i0.ɵɵtext(32, \" Show Photos \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 22);\n    i0.ɵɵtemplate(34, DetailsPage_ion_card_33_ion_grid_34_Template, 3, 1, \"ion-grid\", 12);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const dato_r10 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", dato_r10.seccion_observation, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(dato_r10.description_observation);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(dato_r10.observation_child_name);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", dato_r10.comments, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.photos);\n  }\n}\nconst _c0 = a1 => [\"/observation-section\", a1];\nexport let DetailsPage = /*#__PURE__*/(() => {\n  class DetailsPage {\n    constructor(navCtrl, service, activatedRoute, actionSheetCtrl, alert, toast, loadingController) {\n      this.navCtrl = navCtrl;\n      this.service = service;\n      this.activatedRoute = activatedRoute;\n      this.actionSheetCtrl = actionSheetCtrl;\n      this.alert = alert;\n      this.toast = toast;\n      this.loadingController = loadingController;\n      this.user = localStorage.getItem(\"username\");\n      this.isAlertOpen = false;\n      this.alertButtons = ['Action'];\n    }\n    ngOnInit() {\n      this.id = this.activatedRoute.snapshot.paramMap.get('id');\n      this.showDetails(this.id);\n    }\n    showDetails(id) {\n      const datos = {\n        \"id\": id\n      };\n      this.service.getInspectionById(datos).subscribe(respuesta => {\n        this.id_assing_inspection = respuesta.id;\n        this.getDetails(this.id_assing_inspection);\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n    }\n    getDetails(id) {\n      const datos = {\n        \"id\": id\n      };\n      this.service.getDetailsInspection(datos).subscribe(respuesta => {\n        console.log(respuesta);\n        this.type = respuesta[0].type_inspection;\n        this.description_inspection = respuesta[0].description_inspection;\n        this.inspect_by = respuesta[0].nombre_inspector;\n        this.id_inspection = respuesta[0].id_inspection;\n        this.datos = respuesta;\n        this.name_emp = localStorage.getItem('name_emp');\n        respuesta[0].status == \"0\" ? this.swPending = true : this.swPending = false;\n        respuesta[0].status == \"1\" ? this.swCompleted = true : this.swCompleted = false;\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n    }\n    sendReport(isOpen) {\n      const id = localStorage.getItem(\"id_assigment\");\n      this.service.generateReport(id).subscribe(respuesta => {\n        this.isAlertOpen = isOpen;\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n    }\n    addObservation() {\n      localStorage.setItem(\"id_inspection\", this.id_inspection);\n    }\n    showConfirmationPending() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const alert = yield _this.alert.create({\n          header: 'Confirmation',\n          message: '¿Are you sure?',\n          buttons: [{\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n              console.log('Acción cancelada');\n            }\n          }, {\n            text: 'Ok',\n            handler: () => {\n              _this.swPending = true;\n              _this.updateInspection(_this.id, 0);\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n    showConfirmationCancel() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const alert = yield _this2.alert.create({\n          header: 'Confirmation',\n          message: '¿Are you sure?',\n          buttons: [{\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n              console.log('Acción cancelada');\n            }\n          }, {\n            text: 'Ok',\n            handler: () => {\n              _this2.swPending = false;\n              _this2.updateInspection(_this2.id, 2);\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n    showPhotos(id) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const loading = yield _this3.loadingController.create({\n          message: 'loading photos...'\n        });\n        yield loading.present();\n        const datos = {\n          \"id_observation\": id\n        };\n        _this3.service.getPhotos(datos).subscribe(respuesta => {\n          loading.dismiss();\n          _this3.photos = respuesta;\n        }, error => {\n          loading.dismiss();\n          console.log(\"Error\" + error);\n        });\n      })();\n    }\n    updateInspection(id, status) {\n      const datos = {\n        \"id\": id,\n        \"status\": status\n      };\n      this.service.setUpdateStatus(datos).subscribe(respuesta => {\n        this.success();\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n    }\n    success() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this4.toast.create({\n          message: 'The inspection was updated.',\n          duration: 3000,\n          position: 'middle'\n        });\n        toast.present();\n      })();\n    }\n    presentActionSheet() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        const actionSheet = yield _this5.actionSheetCtrl.create({\n          header: 'Actions',\n          buttons: [{\n            text: 'Are you sure you log out?',\n            role: 'exit',\n            handler: () => {\n              _this5.closeSesion();\n            }\n          }, {\n            text: 'Cancel',\n            role: 'cancel',\n            data: {\n              action: 'cancel'\n            }\n          }]\n        });\n        yield actionSheet.present();\n      })();\n    }\n    closeSesion() {\n      localStorage.clear();\n      this.navCtrl.navigateForward('');\n    }\n    static #_ = this.ɵfac = function DetailsPage_Factory(t) {\n      return new (t || DetailsPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.ServiceService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i1.ActionSheetController), i0.ɵɵdirectiveInject(i1.AlertController), i0.ɵɵdirectiveInject(i1.ToastController), i0.ɵɵdirectiveInject(i1.LoadingController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DetailsPage,\n      selectors: [[\"app-details\"]],\n      decls: 38,\n      vars: 15,\n      consts: [[3, \"translucent\"], [\"src\", \"../../assets/img/logo_circle.png\", \"alt\", \"Logo Inspection squad\", 2, \"width\", \"50px\"], [1, \"user\", 2, \"text-align\", \"right\", 3, \"click\"], [2, \"color\", \"#6E6E6E\"], [\"name\", \"person\"], [1, \"titulo\"], [2, \"font-size\", \"14px\"], [\"fill\", \"solid\", \"size\", \"small\", \"shape\", \"round\", 3, \"routerLink\", \"click\"], [\"name\", \"add-outline\"], [\"fill\", \"solid\", \"size\", \"small\", \"shape\", \"round\", 3, \"click\", 4, \"ngIf\"], [\"header\", \"Send Report\", \"message\", \"The report has been sent successfully.\", 3, \"isOpen\", \"subHeader\", \"buttons\", \"didDismiss\"], [\"fill\", \"clear\", \"size\", \"small\", \"shape\", \"round\", \"style\", \"background-color: #b11c44;color: #fff;\", 3, \"click\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"fill\", \"default\", \"expand\", \"full\", \"routerLink\", \"../../list\", 2, \"background-color\", \"#fff\", \"color\", \"#000\"], [\"name\", \"chevron-back-outline\"], [\"fill\", \"solid\", \"size\", \"small\", \"shape\", \"round\", 3, \"click\"], [\"name\", \"send-outline\"], [\"fill\", \"clear\", \"size\", \"small\", \"shape\", \"round\", 2, \"background-color\", \"#b11c44\", \"color\", \"#fff\", 3, \"click\"], [\"name\", \"checkmark-outline\"], [\"value\", \"first\"], [\"slot\", \"header\", \"color\", \"light\"], [\"name\", \"chatbubble-ellipses-outline\"], [\"slot\", \"content\", 1, \"ion-padding\"], [\"slot\", \"header\", \"color\", \"light\", 3, \"click\"], [\"name\", \"image\"], [3, \"src\"]],\n      template: function DetailsPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\");\n          i0.ɵɵelement(2, \"ion-img\", 1);\n          i0.ɵɵelementStart(3, \"div\", 2);\n          i0.ɵɵlistener(\"click\", function DetailsPage_Template_div_click_3_listener() {\n            return ctx.presentActionSheet();\n          });\n          i0.ɵɵelementStart(4, \"ion-label\", 3);\n          i0.ɵɵtext(5);\n          i0.ɵɵelement(6, \"ion-icon\", 4);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(7, \"ion-content\");\n          i0.ɵɵelement(8, \"br\");\n          i0.ɵɵelementStart(9, \"ion-item\")(10, \"ion-label\", 5);\n          i0.ɵɵtext(11, \"DETAILS OBSERVATIONS IN INSPECTION \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"ion-card\")(13, \"ion-card-header\")(14, \"ion-label\", 6)(15, \"b\");\n          i0.ɵɵtext(16, \"Inspected by: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"br\");\n          i0.ɵɵelementStart(19, \"ion-card-title\");\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"br\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"ion-grid\")(23, \"ion-col\")(24, \"ion-button\", 7);\n          i0.ɵɵlistener(\"click\", function DetailsPage_Template_ion_button_click_24_listener() {\n            return ctx.addObservation();\n          });\n          i0.ɵɵelement(25, \"ion-icon\", 8);\n          i0.ɵɵtext(26, \"\\u00A0ADD\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"ion-col\");\n          i0.ɵɵtemplate(28, DetailsPage_ion_button_28_Template, 3, 0, \"ion-button\", 9);\n          i0.ɵɵelementStart(29, \"ion-alert\", 10);\n          i0.ɵɵlistener(\"didDismiss\", function DetailsPage_Template_ion_alert_didDismiss_29_listener() {\n            return ctx.sendReport(false);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(30, \"ion-col\");\n          i0.ɵɵtemplate(31, DetailsPage_ion_button_31_Template, 2, 0, \"ion-button\", 11)(32, DetailsPage_ion_button_32_Template, 2, 0, \"ion-button\", 9);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(33, DetailsPage_ion_card_33_Template, 35, 5, \"ion-card\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"footer\")(35, \"ion-button\", 13);\n          i0.ɵɵelement(36, \"ion-icon\", 14);\n          i0.ɵɵtext(37, \"Back\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"translucent\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"\", ctx.user, \" \");\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate(ctx.inspect_by);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate2(\"\", ctx.type, \" - \", ctx.description_inspection, \"\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, ctx.type));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.swCompleted);\n          i0.ɵɵadvance(1);\n          i0.ɵɵpropertyInterpolate(\"subHeader\", ctx.name_emp);\n          i0.ɵɵproperty(\"isOpen\", ctx.isAlertOpen)(\"buttons\", ctx.alertButtons);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.swPending);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.swPending);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.datos);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i1.IonAccordion, i1.IonAccordionGroup, i1.IonAlert, i1.IonButton, i1.IonCard, i1.IonCardContent, i1.IonCardHeader, i1.IonCardTitle, i1.IonCol, i1.IonContent, i1.IonGrid, i1.IonHeader, i1.IonIcon, i1.IonImg, i1.IonItem, i1.IonLabel, i1.IonToolbar, i1.RouterLinkDelegate, i3.RouterLink],\n      styles: [\"ion-card-title[_ngcontent-%COMP%]{font-size:18px}ion-img[_ngcontent-%COMP%]{width:100%;height:auto}\"]\n    });\n  }\n  return DetailsPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}