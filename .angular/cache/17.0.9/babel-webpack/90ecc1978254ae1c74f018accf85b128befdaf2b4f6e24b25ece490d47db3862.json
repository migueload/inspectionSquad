{"ast":null,"code":"import _asyncToGenerator from \"/Users/migueload/inspectionSquad/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/service.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ObservationChildPage_ion_item_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-radio\", 15);\n    i0.ɵɵlistener(\"click\", function ObservationChildPage_ion_item_28_Template_ion_radio_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.setCode(item_r1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r1.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r1.observation_child_name);\n  }\n}\nexport let ObservationChildPage = /*#__PURE__*/(() => {\n  class ObservationChildPage {\n    constructor(service, activatedRoute, navCtrl, actionSheetCtrl) {\n      this.service = service;\n      this.activatedRoute = activatedRoute;\n      this.navCtrl = navCtrl;\n      this.actionSheetCtrl = actionSheetCtrl;\n      this.comments = \"\";\n      this.user = localStorage.getItem(\"username\");\n      this.name_emp = localStorage.getItem(\"name_emp\");\n      this.date = localStorage.getItem(\"date\");\n      this.address_emp = localStorage.getItem(\"address_emp\");\n      this.id_inspection = localStorage.getItem(\"id_inspection\");\n    }\n    ngOnInit() {\n      this.id_observation = this.activatedRoute.snapshot.paramMap.get('id');\n      this.loadObservationChild(this.id_observation);\n      this.id_inspection = localStorage.getItem(\"id_inspection\");\n    }\n    loadObservationChild(id_observation) {\n      const datos = {\n        \"id\": id_observation\n      };\n      this.service.getObservationChild(datos).subscribe(respuesta => {\n        this.observations = respuesta;\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n    }\n    setCode(item) {\n      const codeAnt = localStorage.getItem(\"codes\");\n      const codesArray = [codeAnt];\n      codesArray.push(item.code);\n      localStorage.setItem(\"codes\", codesArray);\n      localStorage.setItem(\"observation_child\", item.observation_child_name);\n    }\n    saveInspection() {\n      if (this.id_inspection != \"\") {\n        const datosObservationes = localStorage.getItem(\"codes\").split(',');\n        this.saveInspectionDetails(this.id_inspection);\n      } else {\n        const datosInspection = {\n          \"id_inspector\": localStorage.getItem(\"id_inspector\"),\n          \"id_assing_inspection\": localStorage.getItem(\"id_assigment\")\n        };\n        this.service.saveInspection(datosInspection).subscribe(respuesta => {\n          localStorage.setItem(\"id_inspection\", respuesta);\n          this.saveInspectionDetails(respuesta);\n          if (this.observations == \"\") {\n            localStorage.setItem(\"observation_child\", \"\");\n          }\n        }, error => {\n          console.log(\"Error\" + error);\n        });\n      }\n      this.navCtrl.navigateForward('observation-resume');\n    }\n    saveInspectionDetails(id_inspection) {\n      /**Extrae los codigo de la Observaciones */\n      const datosObservationes = localStorage.getItem(\"codes\").split(',');\n      const datosInspectionDetails = {\n        \"id_inspection\": id_inspection,\n        \"type_inspection\": datosObservationes[0],\n        \"observation_section\": datosObservationes[1],\n        \"observation\": datosObservationes[2],\n        \"observation_child\": datosObservationes[3],\n        \"comments\": this.comments\n      };\n      localStorage.setItem(\"comments\", this.comments);\n      this.service.saveInspectionDetails(datosInspectionDetails).subscribe(respuesta => {\n        localStorage.setItem(\"id_observation\", respuesta);\n        console.log(\"exito\");\n      }, error => {\n        console.log(\"Error\" + error);\n      });\n      this.clearObservations();\n    }\n    clearObservations() {\n      const codesArray = [];\n      const datosObservationes = localStorage.getItem(\"codes\").split(',');\n      const type_inspection = datosObservationes[0];\n      localStorage.setItem(\"codes\", \"\");\n      codesArray.push(type_inspection);\n      localStorage.setItem(\"codes\", codesArray);\n    }\n    closeSesion() {\n      localStorage.clear();\n      this.navCtrl.navigateForward('');\n    }\n    presentActionSheet() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const actionSheet = yield _this.actionSheetCtrl.create({\n          header: 'Actions',\n          buttons: [{\n            text: 'Are you sure you log out?',\n            role: 'exit',\n            handler: () => {\n              _this.closeSesion();\n            }\n          }, {\n            text: 'Cancel',\n            role: 'cancel',\n            data: {\n              action: 'cancel'\n            }\n          }]\n        });\n        yield actionSheet.present();\n      })();\n    }\n    static #_ = this.ɵfac = function ObservationChildPage_Factory(t) {\n      return new (t || ObservationChildPage)(i0.ɵɵdirectiveInject(i1.ServiceService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i3.ActionSheetController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ObservationChildPage,\n      selectors: [[\"app-observation-child\"]],\n      decls: 41,\n      vars: 7,\n      consts: [[3, \"translucent\"], [\"src\", \"../../assets/img/logo_circle.png\", \"alt\", \"Logo Inspection squad\", 2, \"width\", \"50px\"], [1, \"user\", 2, \"text-align\", \"right\", 3, \"click\"], [2, \"color\", \"#6E6E6E\"], [\"name\", \"person\"], [2, \"text-align\", \"left\", \"margin-left\", \"20px\", \"margin-bottom\", \"20px\"], [1, \"titulo\"], [\"value\", \"observation_child\"], [4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Type comments here\", 3, \"ngModel\", \"ngModelChange\"], [2, \"margin-left\", \"20px\", \"padding-right\", \"20px\", \"margin-bottom\", \"20px\"], [\"fill\", \"clear\", \"expand\", \"full\", 2, \"background-color\", \"#1c345c\", \"color\", \"#fff\", 3, \"click\"], [\"name\", \"checkmark-outline\"], [\"fill\", \"default\", \"expand\", \"full\", \"routerLink\", \"../../dashboard\", 2, \"background-color\", \"#fff\", \"color\", \"#000\"], [\"name\", \"chevron-back-outline\"], [3, \"value\", \"click\"]],\n      template: function ObservationChildPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\");\n          i0.ɵɵelement(2, \"ion-img\", 1);\n          i0.ɵɵelementStart(3, \"div\", 2);\n          i0.ɵɵlistener(\"click\", function ObservationChildPage_Template_div_click_3_listener() {\n            return ctx.presentActionSheet();\n          });\n          i0.ɵɵelementStart(4, \"ion-label\", 3);\n          i0.ɵɵtext(5);\n          i0.ɵɵelement(6, \"ion-icon\", 4);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(7, \"ion-content\")(8, \"ion-card\")(9, \"ion-card-header\")(10, \"ion-label\")(11, \"b\");\n          i0.ɵɵtext(12, \"Establishment Address:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"ion-label\")(15, \"b\");\n          i0.ɵɵtext(16, \"Establishment Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"ion-label\")(19, \"b\");\n          i0.ɵɵtext(20, \"Date:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(22, \"br\");\n          i0.ɵɵelementStart(23, \"div\", 5)(24, \"ion-label\", 6);\n          i0.ɵɵtext(25, \"OBSERVATION SECTION\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"ion-list\")(27, \"ion-radio-group\", 7);\n          i0.ɵɵtemplate(28, ObservationChildPage_ion_item_28_Template, 4, 2, \"ion-item\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(29, \"br\");\n          i0.ɵɵelementStart(30, \"ion-card\")(31, \"ion-card-content\")(32, \"ion-textarea\", 9);\n          i0.ɵɵlistener(\"ngModelChange\", function ObservationChildPage_Template_ion_textarea_ngModelChange_32_listener($event) {\n            return ctx.comments = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(33, \"div\", 10)(34, \"ion-button\", 11);\n          i0.ɵɵlistener(\"click\", function ObservationChildPage_Template_ion_button_click_34_listener() {\n            return ctx.saveInspection();\n          });\n          i0.ɵɵelement(35, \"ion-icon\", 12);\n          i0.ɵɵtext(36, \"Save all\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(37, \"footer\")(38, \"ion-button\", 13);\n          i0.ɵɵelement(39, \"ion-icon\", 14);\n          i0.ɵɵtext(40, \"Back\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"translucent\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"\", ctx.user, \" \");\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\" \", ctx.address_emp, \"\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.name_emp, \"\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.date, \"\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.observations);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.comments);\n        }\n      },\n      dependencies: [i4.NgForOf, i5.NgControlStatus, i5.NgModel, i3.IonButton, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonContent, i3.IonHeader, i3.IonIcon, i3.IonImg, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonRadio, i3.IonRadioGroup, i3.IonTextarea, i3.IonToolbar, i3.RadioValueAccessor, i3.SelectValueAccessor, i3.TextValueAccessor, i3.RouterLinkDelegate, i2.RouterLink],\n      styles: [\"ion-label[_ngcontent-%COMP%]{font-size:16px}\"]\n    });\n  }\n  return ObservationChildPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}